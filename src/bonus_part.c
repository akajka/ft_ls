/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_show_pic.c                                      :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: akorobov <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/01/04 08:31:35 by akorobov          #+#    #+#             */
/*   Updated: 2019/01/16 17:13:01 by akorobov         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "../inc/ft_ls.h"

void		ft_show_pic(void)
{
	ft_putendl("\033[1;32m");
	ft_putendl("⠀⠀⠀⠀⠀⠀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀	⠀⠀⠀ ⠀⠀⠀	⠀⣀            ⠀⠀⠀⠀⠀⠀⠀⣤⣿⣿⠶⠀⠀    ");
	ft_putendl("⠀⠀⠀⠀⠀⠀⣿⣿⣿⣤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣤⣿  ⠀⠀⣶⣿⠿⠀⠀⠀⣀⠀⣤⣤      ⠀⠀⠀⠀⣀⣀⣤⣤⣶⣿⣿⣿⣿⣿⣿ ");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠉⣿⣿⣿⣶⣿⣿⣿⣶⣶⣤⣶⣶⠶⠛⠉⠉ ⠀⣶⣿⠀⠀⠀⠀⣿⣿⣿⠛⠛⠿⣤⣀   ⠀⣀⣶⣤⣤⠿⠶⠿⠿⠿⣿⣿⣿⣉⣿⣿ ");
	ft_putendl("⠀⠀⠀⠀⠀⠀⣤⣿⠿⣿⣿⣿⣿⣿⠀⠀⠉⠀⠀⠀⠀⠀⠀⣶⣿⣤⣤⣤⣤⣤⣿⣿⣿⣀⣤⣶⣭⣿⣶⣀  ⠿⣉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠛⣤⣿⣿⣿⣀");
	ft_putendl("⠛⣿⣤⣤⣀⣤⠿⠉⠀⠉⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠉⠉⠛⠛⠿⣿⣿⣿⣿⣿⣿⣿⠛⠛⠿⠿  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⣿⣿⣿⣿⣶⣤");
	ft_putendl("⠀⠉⠉⠉⠉⠉⠀⠀⠀⠀⠉⣿⣿⣿⣀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⠿     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣿⣿⣿⣿⠿⣛⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣶⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⠿⣿⣿⣿⣿      ⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⣿⣿⣿⠛⣿⣿⣿⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⠀⠀⣭⣿⣿⣿      ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣶⣿⣿⠿⠀⣿⣿⣿⠛");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣿⣿⣿⣿⣿⣿     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⠀⠀⣿⣿⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⠿     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠿⠿⣿⠀⠀⣿⣶");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣛⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⠿     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠛⠀⠀⣿⣿⣶");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⣶⣿⣿⠛⠿⣿⣿⣿⣶⣤⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿      ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⣿⣿⠤");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⣿⠛⠉⠀⠀⠀⠛⠿⣿⣿⣶⣀⠀⠀⠀⠀  ⠀⠀⠀⠀⠀⠉⣿⣿⣿⣿      ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠿⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠀⣿⣀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠛⠿⣶⣤⠀⠀ ⠀⠀⠀⠀⠀⠀⠀⠉⣿⣿⣿⣿     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠛⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣿⣿⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⣿⠛⠿⣿    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣀");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠛⠉⠉⠀   ⠀⠀⠀⠀⠀⠀⠀⣀⣿⠀⠀⠀⣿⣿⣤   ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣶⣿");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀     ⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⠀⣶⣿⠛⠉                   ");
	ft_putendl("⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀     ⠀⠀⠀⠀⠀⠀⠀⠀⣤⣿⣿⠀⠀⠉                     \n");
	ft_putendl("\033[0m");
}

void		ft_ex_write(char *f_n, char *d_n)
{
	int		i;
	int		tmp;
	char	path[1024];

	i = 0;
	ft_path(path, d_n, f_n);
	while (g_ex_atr[i] != '\0')
	{
		g_a = getxattr(path, &g_ex_atr[i], NULL, 1024, 0, XATTR_NOFOLLOW);
		if (g_a < 0)
			break ;
		tmp = 8;
		write(1, "\n        ", 9);
		if (g_fl_g)
			ft_putstr("\033[4;31m");
		ft_putstr(&g_ex_atr[i]);
		while (tmp-- > 0)
			write(1, " ", 1);
		ft_putnbr(g_a);
		i += ft_strlen(&g_ex_atr[i]) + 1;
		if (g_fl_g)
			ft_putstr("\033[0m");
	}
	ft_strclr(path);
}

void		ft_extended_attributes(char *f_n, char *d_n)
{
	char	path[1024];
	acl_t	acl;

	acl = NULL;
	if (ft_strcmp(f_n, d_n) != 0)
		ft_path(path, d_n, f_n);
	else
		ft_strcpy(path, d_n);
	if (listxattr(path, g_ex_atr, 1024, XATTR_NOFOLLOW) > 0)
		write(1, "@", 1);
	else if ((acl = acl_get_link_np(path, ACL_TYPE_EXTENDED)) > 0)
	{
		free(acl);
		write(1, "+", 1);
	}
	else
		write(1, " ", 1);
	ft_strclr(path);
}
